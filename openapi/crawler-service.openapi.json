{"openapi":"3.1.0","info":{"title":"Amazon Tracker - Crawler Service","description":"Amazon产品爬虫服务API","version":"1.0.0"},"paths":{"/api/v1/products/crawl":{"post":{"tags":["products"],"summary":"Create Crawl Task","description":"创建单个产品爬取任务","operationId":"create_crawl_task_api_v1_products_crawl_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_crawl_task_api_v1_products_crawl_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CrawlTaskResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/products/batch-crawl":{"post":{"tags":["products"],"summary":"Create Batch Crawl Task","description":"创建批量产品爬取任务","operationId":"create_batch_crawl_task_api_v1_products_batch_crawl_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_batch_crawl_task_api_v1_products_batch_crawl_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CrawlTaskResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/products/{product_id}":{"get":{"tags":["products"],"summary":"Get Product","description":"获取产品详情","operationId":"get_product_api_v1_products__product_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/{product_id}/price-history":{"get":{"tags":["products"],"summary":"Get Price History","description":"获取产品价格历史","operationId":"get_price_history_api_v1_products__product_id__price_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PriceHistoryResponse"},"title":"Response Get Price History Api V1 Products  Product Id  Price History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/{product_id}/rank-history":{"get":{"tags":["products"],"summary":"Get Rank History","description":"获取产品排名历史","operationId":"get_rank_history_api_v1_products__product_id__rank_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RankHistoryResponse"},"title":"Response Get Rank History Api V1 Products  Product Id  Rank History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/{product_id}/tracking-frequency":{"put":{"tags":["products"],"summary":"Update Tracking Frequency","description":"更新产品跟踪频率","operationId":"update_tracking_frequency_api_v1_products__product_id__tracking_frequency_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"frequency","in":"query","required":true,"schema":{"$ref":"#/components/schemas/TrackingFrequency"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/{product_id}/enable":{"post":{"tags":["products"],"summary":"Enable Product Tracking","description":"启用产品跟踪","operationId":"enable_product_tracking_api_v1_products__product_id__enable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/{product_id}/disable":{"post":{"tags":["products"],"summary":"Disable Product Tracking","description":"禁用产品跟踪","operationId":"disable_product_tracking_api_v1_products__product_id__disable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/products/category-crawl":{"post":{"tags":["products"],"summary":"Create Category Crawl Task","description":"创建品类产品爬取任务","operationId":"create_category_crawl_task_api_v1_products_category_crawl_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_category_crawl_task_api_v1_products_category_crawl_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCrawlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/products/categories/{category_name}/products":{"get":{"tags":["products"],"summary":"Get Category Products","description":"获取指定品类的所有产品","operationId":"get_category_products_api_v1_products_categories__category_name__products_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category_name","in":"path","required":true,"schema":{"type":"string","title":"Category Name"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponse"},"title":"Response Get Category Products Api V1 Products Categories  Category Name  Products Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tasks/manual/batch-crawl":{"post":{"tags":["tasks"],"summary":"Trigger Manual Batch Crawl","description":"手动触发批量产品抓取任务","operationId":"trigger_manual_batch_crawl_api_v1_tasks_manual_batch_crawl_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]},{"HTTPBearer":[]}]}},"/api/v1/tasks/manual/monitoring":{"post":{"tags":["tasks"],"summary":"Trigger Manual Monitoring","description":"手动触发监控任务","operationId":"trigger_manual_monitoring_api_v1_tasks_manual_monitoring_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]},{"HTTPBearer":[]}]}},"/api/v1/schedules/":{"get":{"tags":["schedules"],"summary":"List Schedules","description":"获取调度列表","operationId":"list_schedules_api_v1_schedules__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"crawler_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CrawlerType"},{"type":"null"}],"title":"Crawler Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ScheduleResponse"},"title":"Response List Schedules Api V1 Schedules  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["schedules"],"summary":"Create Schedule","description":"创建新的爬虫调度","operationId":"create_schedule_api_v1_schedules__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_schedule_api_v1_schedules__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}":{"get":{"tags":["schedules"],"summary":"Get Schedule","description":"获取调度详情","operationId":"get_schedule_api_v1_schedules__schedule_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["schedules"],"summary":"Update Schedule","description":"更新调度配置","operationId":"update_schedule_api_v1_schedules__schedule_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_update_schedule_api_v1_schedules__schedule_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["schedules"],"summary":"Delete Schedule","description":"删除调度","operationId":"delete_schedule_api_v1_schedules__schedule_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}/enable":{"post":{"tags":["schedules"],"summary":"Enable Schedule","description":"启用调度","operationId":"enable_schedule_api_v1_schedules__schedule_id__enable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}/disable":{"post":{"tags":["schedules"],"summary":"Disable Schedule","description":"禁用调度","operationId":"disable_schedule_api_v1_schedules__schedule_id__disable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}/run-now":{"post":{"tags":["schedules"],"summary":"Run Schedule Now","description":"立即执行调度","operationId":"run_schedule_now_api_v1_schedules__schedule_id__run_now_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/health":{"get":{"tags":["monitoring"],"summary":"Health Check","description":"健康检查端点（公开访问）","operationId":"health_check_api_v1_monitoring_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/metrics":{"get":{"tags":["monitoring"],"summary":"Get Metrics","description":"Prometheus指标端点（公开访问）","operationId":"get_metrics_api_v1_monitoring_metrics_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/api/v1/monitoring/health/detailed":{"get":{"tags":["monitoring"],"summary":"Detailed Health Check","description":"详细健康检查（需要认证）","operationId":"detailed_health_check_api_v1_monitoring_health_detailed_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/stats/crawler":{"get":{"tags":["monitoring"],"summary":"Get Crawler Stats","description":"获取爬虫统计信息","operationId":"get_crawler_stats_api_v1_monitoring_stats_crawler_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/stats/tasks":{"get":{"tags":["monitoring"],"summary":"Get Task Stats","description":"获取任务统计信息","operationId":"get_task_stats_api_v1_monitoring_stats_tasks_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/metrics/record-event":{"post":{"tags":["monitoring"],"summary":"Record Custom Event","description":"记录自定义事件到指标系统","operationId":"record_custom_event_api_v1_monitoring_metrics_record_event_post","parameters":[{"name":"event_type","in":"query","required":true,"schema":{"type":"string","title":"Event Type"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","title":"Tenant Id"}},{"name":"asin","in":"query","required":false,"schema":{"type":"string","title":"Asin"}},{"name":"change_type","in":"query","required":false,"schema":{"type":"string","title":"Change Type"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/alerts":{"get":{"tags":["monitoring"],"summary":"Get Alerts","description":"获取监控告警信息","operationId":"get_alerts_api_v1_monitoring_alerts_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"根路径","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"健康检查","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/me":{"get":{"summary":"Get Current User Info","description":"获取当前用户信息","operationId":"get_current_user_info_api_v1_me_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"BatchCrawlRequest":{"properties":{"asins":{"items":{"type":"string"},"type":"array","maxItems":50,"minItems":1,"title":"Asins","description":"List of ASINs"},"marketplace":{"anyOf":[{"$ref":"#/components/schemas/MarketplaceType"},{"type":"null"}],"description":"Amazon marketplace","default":"amazon_us"},"tracking_frequency":{"anyOf":[{"$ref":"#/components/schemas/TrackingFrequency"},{"type":"null"}],"description":"Tracking frequency","default":"daily"},"priority":{"anyOf":[{"$ref":"#/components/schemas/TaskPriority"},{"type":"null"}],"description":"Task priority","default":"normal"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config","description":"Crawler configuration"}},"type":"object","required":["asins"],"title":"BatchCrawlRequest","description":"批量产品爬取请求"},"Body_create_batch_crawl_task_api_v1_products_batch_crawl_post":{"properties":{"request":{"$ref":"#/components/schemas/BatchCrawlRequest"},"token_data":{"$ref":"#/components/schemas/TokenData"}},"type":"object","required":["request","token_data"],"title":"Body_create_batch_crawl_task_api_v1_products_batch_crawl_post"},"Body_create_category_crawl_task_api_v1_products_category_crawl_post":{"properties":{"request":{"$ref":"#/components/schemas/CategoryCrawlRequest"},"token_data":{"$ref":"#/components/schemas/TokenData"}},"type":"object","required":["request","token_data"],"title":"Body_create_category_crawl_task_api_v1_products_category_crawl_post"},"Body_create_crawl_task_api_v1_products_crawl_post":{"properties":{"request":{"$ref":"#/components/schemas/ProductCrawlRequest"},"token_data":{"$ref":"#/components/schemas/TokenData"}},"type":"object","required":["request","token_data"],"title":"Body_create_crawl_task_api_v1_products_crawl_post"},"Body_create_schedule_api_v1_schedules__post":{"properties":{"request":{"$ref":"#/components/schemas/CreateScheduleRequest"},"token_data":{"$ref":"#/components/schemas/TokenData"}},"type":"object","required":["request","token_data"],"title":"Body_create_schedule_api_v1_schedules__post"},"Body_update_schedule_api_v1_schedules__schedule_id__put":{"properties":{"request":{"$ref":"#/components/schemas/UpdateScheduleRequest"},"token_data":{"$ref":"#/components/schemas/TokenData"}},"type":"object","required":["request","token_data"],"title":"Body_update_schedule_api_v1_schedules__schedule_id__put"},"CategoryCrawlRequest":{"properties":{"category_url":{"type":"string","title":"Category Url","description":"Amazon category or search URL"},"category_name":{"type":"string","maxLength":200,"minLength":1,"title":"Category Name","description":"Category name for tracking"},"product_limit":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Product Limit","description":"Number of products to crawl","default":10},"marketplace":{"anyOf":[{"$ref":"#/components/schemas/MarketplaceType"},{"type":"null"}],"description":"Amazon marketplace","default":"amazon_us"},"tracking_frequency":{"anyOf":[{"$ref":"#/components/schemas/TrackingFrequency"},{"type":"null"}],"description":"Tracking frequency","default":"daily"},"priority":{"anyOf":[{"$ref":"#/components/schemas/TaskPriority"},{"type":"null"}],"description":"Task priority","default":"normal"},"sort_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort By","description":"Sort products by: best_seller, price_low_high, price_high_low, newest, rating","default":"best_seller"},"filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Filters","description":"Additional filters (price range, brand, etc.)"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config","description":"Crawler configuration"}},"type":"object","required":["category_url","category_name"],"title":"CategoryCrawlRequest","description":"品类产品爬取请求"},"CategoryCrawlResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"category_name":{"type":"string","title":"Category Name"},"category_url":{"type":"string","title":"Category Url"},"product_count":{"type":"integer","title":"Product Count"},"product_ids":{"items":{"type":"integer"},"type":"array","title":"Product Ids"},"asins_found":{"items":{"type":"string"},"type":"array","title":"Asins Found"},"status":{"$ref":"#/components/schemas/TaskStatus"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["task_id","category_name","category_url","product_count","product_ids","asins_found","status","created_at"],"title":"CategoryCrawlResponse","description":"品类爬取任务响应"},"CrawlTaskResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"product_id":{"type":"integer","title":"Product Id"},"asin":{"type":"string","title":"Asin"},"status":{"$ref":"#/components/schemas/TaskStatus"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["task_id","product_id","asin","status","created_at"],"title":"CrawlTaskResponse","description":"爬虫任务响应"},"CrawlerType":{"type":"string","enum":["apify_amazon_scraper","apify_amazon_reviews","custom_scraper"],"title":"CrawlerType","description":"爬虫类型枚举"},"CreateScheduleRequest":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Description"},"cron_expression":{"type":"string","title":"Cron Expression","description":"Cron expression for scheduling"},"timezone":{"type":"string","title":"Timezone","description":"Timezone","default":"UTC"},"crawler_type":{"$ref":"#/components/schemas/CrawlerType"},"task_template":{"additionalProperties":true,"type":"object","title":"Task Template"},"product_filters":{"additionalProperties":true,"type":"object","title":"Product Filters"}},"type":"object","required":["name","cron_expression","crawler_type"],"title":"CreateScheduleRequest","description":"创建调度请求"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MarketplaceType":{"type":"string","enum":["amazon_us","amazon_uk","amazon_de","amazon_fr","amazon_jp","amazon_ca","amazon_au","amazon_in"],"title":"MarketplaceType","description":"市场类型枚举"},"PriceHistoryResponse":{"properties":{"id":{"type":"integer","title":"Id"},"product_id":{"type":"integer","title":"Product Id"},"price":{"type":"number","title":"Price"},"list_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"List Price"},"currency":{"type":"string","title":"Currency"},"recorded_at":{"type":"string","format":"date-time","title":"Recorded At"}},"type":"object","required":["id","product_id","price","list_price","currency","recorded_at"],"title":"PriceHistoryResponse","description":"价格历史响应"},"ProductCrawlRequest":{"properties":{"asin":{"type":"string","maxLength":10,"minLength":10,"title":"Asin","description":"Amazon ASIN"},"marketplace":{"anyOf":[{"$ref":"#/components/schemas/MarketplaceType"},{"type":"null"}],"description":"Amazon marketplace","default":"amazon_us"},"tracking_frequency":{"anyOf":[{"$ref":"#/components/schemas/TrackingFrequency"},{"type":"null"}],"description":"Tracking frequency","default":"daily"},"priority":{"anyOf":[{"$ref":"#/components/schemas/TaskPriority"},{"type":"null"}],"description":"Task priority","default":"normal"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config","description":"Crawler configuration"}},"type":"object","required":["asin"],"title":"ProductCrawlRequest","description":"单个产品爬取请求"},"ProductResponse":{"properties":{"id":{"type":"integer","title":"Id"},"asin":{"type":"string","title":"Asin"},"title":{"type":"string","title":"Title"},"brand":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Brand"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"marketplace":{"$ref":"#/components/schemas/MarketplaceType"},"current_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Price"},"current_rank":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Current Rank"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"review_count":{"type":"integer","title":"Review Count"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"availability":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Availability"},"tracking_frequency":{"$ref":"#/components/schemas/TrackingFrequency"},"is_active":{"type":"boolean","title":"Is Active"},"last_crawled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Crawled At"},"next_crawl_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Crawl At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","asin","title","brand","category","marketplace","current_price","current_rank","rating","review_count","image_url","availability","tracking_frequency","is_active","last_crawled_at","next_crawl_at","created_at"],"title":"ProductResponse","description":"产品响应"},"RankHistoryResponse":{"properties":{"id":{"type":"integer","title":"Id"},"product_id":{"type":"integer","title":"Product Id"},"rank":{"type":"integer","title":"Rank"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"recorded_at":{"type":"string","format":"date-time","title":"Recorded At"}},"type":"object","required":["id","product_id","rank","category","recorded_at"],"title":"RankHistoryResponse","description":"排名历史响应"},"ScheduleResponse":{"properties":{"schedule_id":{"type":"string","title":"Schedule Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"cron_expression":{"type":"string","title":"Cron Expression"},"timezone":{"type":"string","title":"Timezone"},"crawler_type":{"$ref":"#/components/schemas/CrawlerType"},"is_active":{"type":"boolean","title":"Is Active"},"last_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Run At"},"next_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Run At"},"total_runs":{"type":"integer","title":"Total Runs"},"successful_runs":{"type":"integer","title":"Successful Runs"},"failed_runs":{"type":"integer","title":"Failed Runs"},"success_rate":{"type":"number","title":"Success Rate"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["schedule_id","name","description","cron_expression","timezone","crawler_type","is_active","last_run_at","next_run_at","total_runs","successful_runs","failed_runs","success_rate","created_at"],"title":"ScheduleResponse","description":"调度响应"},"TaskPriority":{"type":"string","enum":["low","normal","high","urgent"],"title":"TaskPriority","description":"任务优先级枚举"},"TaskStatus":{"type":"string","enum":["pending","running","success","failed","retrying","cancelled","timeout"],"title":"TaskStatus","description":"任务状态枚举"},"TokenData":{"properties":{"user_id":{"type":"integer","title":"User Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"email":{"type":"string","title":"Email"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"is_super_admin":{"type":"boolean","title":"Is Super Admin","default":false},"roles":{"items":{"type":"string"},"type":"array","title":"Roles"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"},"session_id":{"type":"string","title":"Session Id"},"exp":{"type":"string","format":"date-time","title":"Exp"},"iat":{"type":"string","format":"date-time","title":"Iat"},"jti":{"type":"string","title":"Jti"}},"type":"object","required":["user_id","tenant_id","email","session_id","exp","iat","jti"],"title":"TokenData","description":"JWT Token数据结构"},"TrackingFrequency":{"type":"string","enum":["hourly","every_6_hours","daily","weekly","monthly"],"title":"TrackingFrequency","description":"追踪频率枚举"},"UpdateScheduleRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Description"},"cron_expression":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cron Expression"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"task_template":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Task Template"},"product_filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Product Filters"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UpdateScheduleRequest","description":"更新调度请求"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}